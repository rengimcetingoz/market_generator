# GAN portfolios

This package supports the fit of a generative model for stock returns and the analysis of the results.

## Install

```bash
# create the virtualenv
python3 -m pip install --upgrade pip
pip install virtualenv
virtualenv -p python3 venv_gan_portfolios

# populate the virtualenv
. venv_gan_portfolios/bin/activate
python3 -m pip install -r requirements.txt 
python3 -m pip install -e .
# create the kernel (to be used by notebooks)
python3 -m pip install ipykernel
python -m ipykernel install --user --name="venv_gan_portfolios" --display-name="gan_portfolios"
deactivate
```

Later on, an update of the virtualenv can be done via an dupdate of the `requirments.txt` file and

```bash
. venv_gan_portfolios/bin/activate
python3 -m pip install -r requirements.txt | grep -v 'Requirement already satisfied'
deactivate
```


## Scripts

- `01_Extracting_factors.ipynb`:  to specify the number of PCs, conduct analysis and generate charts revealing the difference between factor and residual returns
- `02_PC_clustering.ipynb`: to cluster the chosen PCs in 3 groups based on certain properties 
- `03_GAN_train_clusters.ipynb`: to train a GAN for each cluster 
- `04_Residuals_fit.ipynb`: to fit univariate Student-t to residual returns
- `05_Synthetic_PCs_evaluation.ipynb`: to evaluate the quality of the generators for each cluster
- `06_Market_Generator_evalution.ipynb`: (<font color="red">TODO Rengim: a loop with nore generations and stats for the metrics</font>) to evaluate the quality of the synthetic data after passing to the original dimension at the stock level
- `07_Application_Market_Generator.ipynb`: (<font color="red">TODO CAL: Momentum (L/S and LO) and mean-reversion</font>) to implement applications using the market generator

## Directories

- `data`: the relevant data for the pipeline
- `figures` (became `images`): the figures (which will possible be used in the paper) generated by the above scripts
- `modules` (became the main package `gan_portfolios`): the functions for the pipeline
- `data.residuals`: the model fit parameters for the residuals of each stock
- `training` : some pre-trained GANs
   - `2024_3_9__13_21_training_cluster_1`: contains the generator of the corresponding cluster and evolution of key metrics during the training
   - `2024_3_11__16_30_training_cluster_2`: contains the generator of the corresponding cluster and evolution of key metrics during the training
   - `2024_3_9__14_50_training_cluster_3`: contains the generator of the corresponding cluster and evolution of key metrics during the training